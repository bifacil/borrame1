<!DOCTYPE html []>
<html lang="es" data-authenticationTime="1 ms" data-authorizeRequestTime="0 ms" data-engineCreationTime="1 ms" data-engineVariablesTime="0 ms" data-responseCreationTime="1" data-evaluationTime="8" data-queryTime="0" data-evaluationsCount="164" data-queryCount="1" data-query="serie-dwh/claves-subrogadas.html">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1,requiresActiveX=true" />
    <title>Claves subrogadas</title>
    <meta name="description" content="" />
    <meta name="keywords" content="Business Intelligence,datawarehouse,crono,BI,cuadro de mando,Barcelona,España" />
    <meta name="y_key" content="f9df80cf3ef594d6" />
    <meta name="google-site-verification" content="w6gZESf_S3APOXfjzJMrnLIiA9bcWeRPJSTjlB-8Mfg" />
    <meta name="msvalfidate.01" content="401B0C3C6EEDE1AC271C85838378209E" />
    <link href="../resources/images/favicon.png" rel="shortcut icon" />
    <link href="../resources/js/animations/animate.min.css" rel="stylesheet" />
    <link href="../resources/css/fontawesome/font-awesome.min.css" rel="stylesheet" />
    <link href="../resources/css/iconfontcustom/icon-font-custom.css" rel="stylesheet" />
    <link href="../resources/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../resources/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../resources/css/base.css" rel="stylesheet" />
    <link href="../resources/css/style.css" type="text/css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:100,100i,300,300i,400,400i,700" rel="stylesheet" />
    <link href="https://www.businessintelligence.info/rss.xml" rel="alternate" type="application/rss+xml" title="(RSS)" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <link href="https://www.businessintelligence.info/serie-dwh/claves-subrogadas.html" rel="canonical" />
    <script src="../resources/js/jquery-2.1.1.min.js"></script>
    <script src="../resources/js/viewport/jquery.viewport.js"></script>
    <script>
      (function() {
        var cx = '001840061174465826245:yxey5gkicrq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
  </head>
  <body>
    <div id="wrap">
      <header id="header" class="stuck">
        <div class="row">
          <div class="span3">
            <div id="logo">
              <a href="../index.html">
                <img src="../resources/images/Logo-bif-crono.png" alt="" />
              </a>
            </div>
          </div>
          <div class="span9">
            <a href="#" id="mobile-menu-trigger">
              <i class="fa fa-bars"></i>
            </a>
            <nav>
              <ul class="sf-menu fixed" id="menu">
                <li>
                  <a href="../buscar.html">
                    <svg width="25" height="25" viewBox="0 0 13 13">
                      <title>Búsqueda</title>
                      <path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z" />
                    </svg>
                  </a>
                </li>
                <li>
                  <a href="../index.html">Inicio</a>
                </li>
                <li>
                  <a href="../archivo.html">Archivo</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <div class="row" id="banner">
        <div class="span10 banner">
          <a href="https://businessintelligence.es" alt="Business Intelligence">
            <img src="../resources/images/banner1.jpg" />
          </a>
        </div>
      </div>
      <div class="row">
        <main class="span10 post">
          <article>
            <div>
              <div class="up-title">
                <h1>Claves subrogadas</h1>
                <a class="catlink" href="../categorias.html#serie-dwh">Serie DWH</a>
              </div>
              <div class="fecha">martes, 16 de junio de 2009</div>
              <p>
                <img src="https://www.businessintelligence.info/resources/assets/imagenes/codigo-de-barras-business-intelligence.gif" alt="En tu sistema Business Intelligence, crea claves subrogadas incluso para los códigos de barras" title="En tu sistema Business Intelligence, crea claves subrogadas incluso para los códigos de barras" style="float:left;width:200px;height:160px;" />
              </p>
              <p>
                <span>En la anterior entrega de esta serie sobre </span>
                <a href="https://www.businessintelligence.info/serie-dwh/como-no-construir-datawarehouse.html">cómo construir un datawarehouse</a>
                <span> ya introducía el concepto de las “claves subrogadas”.</span>
              </p>
              <p>Una clave subrogada es un identificador único que se asigna a cada registro de una tabla de dimensión. Esta clave, generalmente, no tiene ningún sentido específico de negocio. Son siempre de tipo numérico. Preferiblemente, un entero autoincremental.</p>
              <p>Habitualmente, el sistema operacional ya utiliza sus propias claves, aunque suelen ser de tipo carácter y tienen un sentido específico para los empleados de la compañía. Por ejemplo, el código BCN puede utilizarse para referirse a Barcelona, o el DNI de cada empleado puede ser la clave única de la tabla de empleados. O el código de barras para referirse a un producto. ¿Por qué necesitamos, entonces, crear unos nuevos identificadores en el sistema Business Intelligence? Por varios motivos:</p>
              <ul>
                <li>
                  <b>Fuentes heterogéneas.</b>
                  <span> El DWH suele alimentarse de diferentes fuentes, cada una de ellas con sus propias claves, por lo que es arriesgado asumir un código de alguna aplicación en particular. ¿Qué ocurriría si en el futuro se añade información de una aplicación que tiene su propio maestro de ciudades? Seguro que nos generará un problema, aparecerán ciudades que no existían en nuestro maestro…¿Cómo lo gestionaríamos? No sé. Lo mejor es crear nuestras propias claves subrogadas desde el inicio del proyecto.</span>
                </li>
                <li>
                  <b>Cambios en las aplicaciones origen.</b>
                  <span> Puede ocurrir que cambie la lógica operacional de alguna clave que hubiésemos supuesto única, o que siempre debería estar informada. ¿Qué pasará cuando llegue un empleado sin DNI? ¿Qué pasará cuando se de de alta una ciudad extranjera con el código BCN? Prefiero no saberlo. Lo mejor es crear nuestras propias claves subrogadas desde el inicio del proyecto.</span>
                </li>
                <li>
                  <b>Rendimiento.</b>
                  <span> En la base de datos, ocupa menos espacio un entero que una cadena. Identificar una ciudad con 5 bytes, o una persona con 9 bytes es un desperdicio considerable de espacio. De hecho, no debe preocuparnos el espacio que ocupa, sino el tiempo que se pierde en leerlo… Recordad que las claves subrogadas las llevaremos a las tablas de hechos, por lo que cada código es susceptible de repetirse cientos de millones de veces. Conviene optimizarlo al máximo. Lo mejor es crear nuestras propias claves subrogadas desde el inicio del proyecto.</span>
                </li>
              </ul>
              <p>Por supuesto, también se pueden cometer errores al generar una clave subrogada…</p>
              <p>
                <b>Error 8: Crear “smart keys” para relacionar una tabla de dimension con una tabla de hechos.</b>
              </p>
              <p>
                <span>En ocasiones, nos puede parecer útil aprovechar la lógica que subyace a los elementos para generar nuestras propias claves. Por ejemplo, si queremos crear una jerarquía de ciudades, nunca debemos caer en la tentación de crear una simple concatenación (y generar el código ESP-CAT-BCN para referirnos a Barcelona)… También es un error crear una clave compuesta de varios campos. Aunque en el operacional la terna </span>
                <i>país-CCAA-ciudad</i>
                <span> sea única, en el DWH debemos crear una clave subrogada formada por un solo campo entero autoincremental.</span>
              </p>
              <p>Recuerda: Sustituye cualquier clave física por una clave entera numerada secuencialmente desde 1 hasta N.</p>
            </div>
            <div class="comentarios">
              <div id="disqus_thread"></div>
              <script>
            		var disqus_config = function () {
            			this.page.url = 'https://www.businessintelligence.info/serie-dwh/claves-subrogadas.html'
            			this.page.identifier = 'bifacil37'
            		};	
            		(function() { 
            			var d = document, s = d.createElement('script');
            			s.src = '//bifacil.disqus.com/embed.js';
            			s.setAttribute('data-timestamp', +new Date());
            			(d.head || d.body).appendChild(s);
            		})();
            	</script>
            </div>
          </article>
        </main>
      </div>
    </div>
    <footer>
      <div class="row">
        <div class="span3">
          <ul>
            <li>
              <a href="../index.html">Inicio</a>
            </li>
            <li>
              <a href="../archivo.html">Archivo</a>
            </li>
            <li>
              <a href="../categorias.html">Categorías</a>
            </li>
            <li>
              <a href="../sobre-el-blog/contacto.html">Contacto</a>
            </li>
            <li>
              <a href="../sobre-el-blog/enlaces.html">Enlaces</a>
            </li>
          </ul>
        </div>
        <div class="span3">
          <div class="rrss-footer">
            <a href="https://www.linkedin.com/company/businessintelligence" target="_blank" class="fa fa-linkedin"></a>
            <a href="http://twitter.com/bifacil" target="_blank" class="fa fa-twitter"></a>
            <a href="https://www.youtube.com/c/BusinessIntelligenceInfo" target="_blank" class="fa fa-youtube"></a>
            <a href="https://www.facebook.com/CronoBusinessIntelligence" target="_blank" class="fa fa-facebook"></a>
          </div>
        </div>
        <div class="span3">
          <section class="newsletter">
            <p>¿Quieres recibir los artículos de este blog por correo electrónico? No te pierdas ni un artículo. Mantente informado sobre lo que ocurre en el mundo del Business Intelligence.</p>
            <div class="divBoton">
              <a href="../subscribe.html">
                <img src="../resources/images/mail_icona.png" />
                <p>¡Síguenos!</p>
              </a>
            </div>
          </section>
        </div>
      </div>
    </footer>
    <script src="../resources/js/scripts.js"></script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-3456231-2");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>