<!DOCTYPE html []>
<html lang="es" data-authenticationTime="1 ms" data-authorizeRequestTime="1 ms" data-engineCreationTime="2 ms" data-engineVariablesTime="1 ms" data-responseCreationTime="14" data-evaluationTime="14" data-queryTime="0" data-evaluationsCount="275" data-queryCount="1" data-query="crono/sql-dry-dont-repeat-yourself.html">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1,requiresActiveX=true" />
    <title>SQL sin repeticiones (y 5)</title>
    <meta name="description" content="Terminamos hoy, por fin, esta serie de 5 artículos mostrando nuestras cartas. Ahora es posible escribir consultas complejas sin incurrir en las redundancias típicas del SQL. Lo único que hemos hecho ha sido pasar la segadora por encima de cada una de las repeticiones que encontrábamos en el código SQL. " />
    <meta name="keywords" content="Business Intelligence,datawarehouse,crono,BI,cuadro de mando,Barcelona,España" />
    <meta name="y_key" content="f9df80cf3ef594d6" />
    <meta name="google-site-verification" content="w6gZESf_S3APOXfjzJMrnLIiA9bcWeRPJSTjlB-8Mfg" />
    <meta name="msvalfidate.01" content="401B0C3C6EEDE1AC271C85838378209E" />
    <link href="../resources/images/favicon.png" rel="shortcut icon" />
    <link href="../resources/js/animations/animate.min.css" rel="stylesheet" />
    <link href="../resources/css/fontawesome/font-awesome.min.css" rel="stylesheet" />
    <link href="../resources/css/iconfontcustom/icon-font-custom.css" rel="stylesheet" />
    <link href="../resources/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../resources/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../resources/css/base.css" rel="stylesheet" />
    <link href="../resources/css/style.css" type="text/css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:100,100i,300,300i,400,400i,700" rel="stylesheet" />
    <link href="https://www.businessintelligence.info/rss.xml" rel="alternate" type="application/rss+xml" title="(RSS)" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <link href="https://www.businessintelligence.info/crono/sql-dry-dont-repeat-yourself.html" rel="canonical" />
    <script src="../resources/js/jquery-2.1.1.min.js"></script>
    <script src="../resources/js/viewport/jquery.viewport.js"></script>
    <script>
      (function() {
        var cx = '001840061174465826245:yxey5gkicrq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <script src="../resources/js/prettify-full.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div id="wrap">
      <header id="header" class="stuck">
        <div class="row">
          <div class="span3">
            <div id="logo">
              <a href="../index.html">
                <img src="../resources/images/Logo-bif-crono.png" alt="" />
              </a>
            </div>
          </div>
          <div class="span9">
            <a href="#" id="mobile-menu-trigger">
              <i class="fa fa-bars"></i>
            </a>
            <nav>
              <ul class="sf-menu fixed" id="menu">
                <li>
                  <div class="buscador_google">
                    <div class="gcse-search"></div>
                  </div>
                </li>
                <li>
                  <a href="../index.html">Inicio</a>
                </li>
                <li>
                  <a href="../archivo.html">Archivo</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <div class="row" id="banner">
        <div class="span10 banner">
          <a href="https://businessintelligence.es" alt="Business Intelligence">
            <img src="../resources/images/banner1.jpg" />
          </a>
        </div>
      </div>
      <div class="row">
        <main class="span10 post">
          <article>
            <div class="up-title">
              <h1>SQL sin repeticiones (y 5)</h1>
              <a class="catlink" href="../categorias.html#crono">Crono</a>
            </div>
            <div class="fecha">miércoles, 19 de abril de 2017</div>
            <p>
              <img src="https://www.businessintelligence.info/resources/imagenes-bi/magia.jpg" alt="Toda tecnología suficientemente avanzada es indistinguible de la magia" />
            </p>
            <h2>Introducción</h2>
            <p>Termino hoy, por fin, esta serie de 5 artículos. En los anteriores artículos criticaba la verbosidad del  SQL y proponía <strong>Crono SQL</strong> como un lenguaje sin estas deficiencias:</p>
            <ul>
              <li>
                <a href="https://www.businessintelligence.info/definiciones/una-critica-al-lenguaje-sql.html">Artículo 1: Cada vez que repites código Dios mata un gatito</a>
              </li>
              <li>
                <a href="https://www.businessintelligence.info/definiciones/una-critica-al-lenguaje-sql-ii.html">Artículo 2: Una crítica al lenguaje SQL</a>
              </li>
              <li>
                <a href="https://www.businessintelligence.info/definiciones/una-critica-al-lenguaje-sql-reloaded.html">Artículo 3: Una crítica al lenguaje SQL</a>
              </li>
              <li>
                <a href="https://www.businessintelligence.info/crono/presentacion-crono-sql.html">Artículo 4: Un SQL con superpoderes</a>
              </li>
            </ul>
            <p>En el último artículo mostraba que gracias a <strong>Crono SQL</strong> podíamos eliminar los <strong>GROUP BY</strong> y simplificar el <strong>SELECT</strong>, pero quedó pendiente resolver la repetición más grave de todas. ¿Por qué debemos escribir una y otra vez los <strong>JOIN</strong> en cada consulta que realicemos sobre el mismo modelo de datos? ¿Acaso el modelo de datos no es algo básicamente estático y que no cambiará entre consulta y consulta?</p>
            <p>En nuestro caso, tenemos un modelo  de <em>Internet Sales</em> y otro de <em>Reseller Sales</em>. Son los mismos diagramas que mostramos al inicio de esta serie:</p>
            <p>
              <img src="https://www.businessintelligence.info/resources/imagenes-bi/adventureworks2008-datamodel.png" alt="Adventure Works 2008" />
            </p>
            <p>Sin más préambulos, vamos a ver como se escribirían las consultas que nos traemos entre manos...</p>
            <h2>Ejemplo 1</h2>
            <p>En el primer ejemplo, necesitábamos “el detalle de las bicicletas vendidas en enero de 2008, ordenadas en función de su precio”. Esta es la consulta equivalente en <strong>Crono SQL</strong>:</p>
            <script src="https://gist.github.com/bifacil/6159efbbcadf9b049587bfe36aa9abb4.js"></script>
            <div class="viewSql">
              <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modaldcf84873b76970609993cb378ed77491">Ver SQL compilado</button>
            </div>
            <div class="modal fade" id="modaldcf84873b76970609993cb378ed77491" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="True">❌</span>
                    </button>
                    <h4 class="modal-title">Código SQL generado</h4>
                  </div>
                  <div class="modal-body"></div>
                  <script src="https://gist.github.com/bifacil/dcf84873b76970609993cb378ed77491.js"></script>
                </div>
              </div>
            </div>
            <p>Miremos de nuevo la consulta, ¿Dónde están los <strong>JOIN</strong>? ¡No están!</p>
            <h2>Ejemplo 2</h2>
            <p>La segunda consulta era acerca de "las bicicletas vendidas en Alemania durante el 2008". Tachán:</p>
            <script src="https://gist.github.com/bifacil/36fc065b0cd6d28b53db3bc3d2c3156d.js"></script>
            <div class="viewSql">
              <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modalc0939c026261548ea46dc830f153c25e">Ver SQL compilado</button>
            </div>
            <div class="modal fade" id="modalc0939c026261548ea46dc830f153c25e" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="True">❌</span>
                    </button>
                    <h4 class="modal-title">Código SQL generado</h4>
                  </div>
                  <div class="modal-body"></div>
                  <script src="https://gist.github.com/bifacil/c0939c026261548ea46dc830f153c25e.js"></script>
                </div>
              </div>
            </div>
            <h2>Ejemplo 3</h2>
            <p>El tercer ejemplo era "el total de unidades vendidas en 2008 por países". También, sin rastro de los <strong>JOIN</strong>:</p>
            <script src="https://gist.github.com/bifacil/39296867c9cd77527518ccb01e599323.js"></script>
            <div class="viewSql">
              <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modalfc5f3bc3c791a1f4048d3814faa3d80f">Ver SQL compilado</button>
            </div>
            <div class="modal fade" id="modalfc5f3bc3c791a1f4048d3814faa3d80f" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="True">❌</span>
                    </button>
                    <h4 class="modal-title">Código SQL generado</h4>
                  </div>
                  <div class="modal-body"></div>
                  <script src="https://gist.github.com/bifacil/fc5f3bc3c791a1f4048d3814faa3d80f.js"></script>
                </div>
              </div>
            </div>
            <p>Observad en el SQL generado que <strong>Crono SQL</strong> selecciona las tablas y las relaciones necesarias en cada caso (¡y solo esas!)</p>
            <h2>Ejemplo 4</h2>
            <p>El cuarto ejemplo es más espectacular. Nos pedían "el detalle de las bicicletas vendidas en enero de 2008 y en enero del 2007". Como comentamos previamente, el especificación del lenguaje SQL no es especialmente brillante a la hora de realizar operaciones entre filas. En cambio, con <strong>Crono SQL</strong> es posible aplicar filtros distintos en cada columna de la consulta, y operar entre ellos...  Esta es la consulta escrita en lenguaje <strong>Crono SQL</strong>:</p>
            <script src="https://gist.github.com/bifacil/ecd0a8b7692d0118e46fe742364eb3a5.js"></script>
            <div class="viewSql">
              <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modal9dfe825567f0ccdbbf616a99502ae58e">Ver SQL compilado</button>
            </div>
            <div class="modal fade" id="modal9dfe825567f0ccdbbf616a99502ae58e" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="True">❌</span>
                    </button>
                    <h4 class="modal-title">Código SQL generado</h4>
                  </div>
                  <div class="modal-body"></div>
                  <script src="https://gist.github.com/bifacil/9dfe825567f0ccdbbf616a99502ae58e.js"></script>
                </div>
              </div>
            </div>
            <p>Como se muestra en la anterior consulta, <strong>Crono SQL</strong> permite incluir predicados <strong>WHERE</strong> a nivel de columna. Tampoco es necesario incluir las tablas ni los <strong>JOIN</strong> de la query (o queries, en este caso).</p>
            <h2>Ejemplo 5</h2>
            <p>El quinto y último ejemplo era una consulta entre distintas tablas de hecho. Queríamos "comparar o sumar las ventas de internet con las ventas en tiendas". El  lenguaje SQL, en este tipo de casos, te obliga a realizar dos consultas independientes y unirlas de algún modo. <strong>Crono SQL</strong>, en cambio, incluye la inteligencia para reconocer la necesidad de utilizar distintas tablas de hechos, y unirlas en un único resultado. Así de fácil:</p>
            <script src="https://gist.github.com/bifacil/56e4010719b1f12a3dcdd6861068ca85.js"></script>
            <div class="viewSql">
              <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modal577fd76824e358b2b3beb87845103b71">Ver SQL compilado</button>
            </div>
            <div class="modal fade" id="modal577fd76824e358b2b3beb87845103b71" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="True">❌</span>
                    </button>
                    <h4 class="modal-title">Código SQL generado</h4>
                  </div>
                  <div class="modal-body"></div>
                  <script src="https://gist.github.com/bifacil/577fd76824e358b2b3beb87845103b71.js"></script>
                </div>
              </div>
            </div>
            <p>No busques ahora tampoco ni los <strong>JOIN</strong> ni los <strong>GROUP BY</strong>.</p>
            <p>En todos estos ejemplos, pulsando el botoncito azul, podéis ver el código SQL generado. ¿Es magia o no es magia? :-)</p>
            <p>
              <img src="https://www.businessintelligence.info/resources/imagenes-bi/juan-tamariz.jpg" alt="Juan Tamatiz tocando el violín" />
            </p>
            <p>Hemos visto en estos 5 ejemplos como es posible escribir consultas complejas sin incurrir en las redundancias típicas del SQL. Lo único que hemos hecho ha sido pasar la segadora por encima de cada una de las repeticiones que encontrábamos en el código SQL.</p>
            <h2>Conclusiones</h2>
            <p>
              <strong>Crono SQL</strong> es un lenguaje de programación basado en SQL, pero que añade algunas variantes para evitar las repeticiones de código. <strong>Crono</strong> permite crear la "capa semántica" de tu DWH o de tu ERP, y luego aprovecharla para generar informes dinámicos o para crear procesos ETL.</p>
            <p>Lo que hemos hecho es "desacoplar" el potente motor generador de consultas que siempre ha caracterizado a <strong>Crono Analysis</strong> para poder aprovecharlo en otros usos (ya sea crear informes HTML, o procesos ETL...). Por el camino, además, hemos enriquecido el lenguaje para permitir la manipulación de datos (<a href="https://businessintelligence.es/soporte/crono-sql-insert-update-merge.html"><strong>INSERT</strong>, <strong>UPDATE</strong>, <strong>MERGE</strong>...</a>). Tenemos, ahora sí, un <a href="https://www.businessintelligence.info/definiciones/lo-mas-importante-para-crear-datawarehouse-dry.html">lenguaje DRY</a> apropiado para implementar proyectos de la envergadura de un Data Warehouse corporativo.</p>
            <p>
              <img src="https://www.businessintelligence.info/resources/imagenes-bi/principio-dry.png" alt="Don't repeat yourself" />
            </p>
            <p>El resultado es algo revolucionario, ya que nos permite implementar proyectos ETL/DWH con el mejor rendimiento y con una fracción del esfuerzo requerido con otros acercamientos tradicionales.  <strong>Crono</strong> ya no es solo <strong>Crono Analysis</strong>. Ahora es una completa suite de Business Intelligence que abarca desde la construcción del DWH hasta la explotación por parte del usuario. Si miras nuestra web <a href="https://businessintelligence.es/">businessintelligence.es</a> verás que la solución se compone de:</p>
            <ul>
              <li>
                <strong>Crono ETL</strong> (para el diseño y construcción del DWH)</li>
              <li>
                <strong>Crono Metadata</strong> (para la definición de la capa semántica)</li>
              <li>
                <strong>Crono Analysis</strong> (para que el  usuario de negocio pueda hacer informes, análisis y autoservicio)</li>
              <li>
                <strong>Crono Excel</strong> (para los hooligans más incondicionales del Excel)</li>
            </ul>
            <p>Pero eso serán motivos para nuevos artículos.</p>
            <p>Mientras tanto, si queréis seguir descubriendo <strong>Crono SQL</strong> podéis consultar la documentación en la web de soporte de Crono:</p>
            <ul>
              <li>
                <a href="https://businessintelligence.es/soporte/introduccion-crono-sql.html">Sentencia SELECT de Crono SQL</a>
              </li>
              <li>
                <a href="https://businessintelligence.es/soporte/crono-sql-insert-update-merge.html">Sentencias INSERT, UPDATE, MERGE, DELETE, TRUNCATE</a>
              </li>
            </ul>
            <p>Recuerda que podéis apuntaros a nuestra newletter sobre Business Intelligence o seguirnos en redes sociales:</p>
            <ul>
              <li>
                <a href="https://www.businessintelligence.info/subscribe.html">La newsletter de Business Intelligence fácil</a>
              </li>
              <li>
                <a href="https://twitter.com/bifacil">Twitter @bifacil</a>
              </li>
              <li>
                <a href="https://www.linkedin.com/company/businessintelligence">Linkdin Crono Business Intelligence</a>
              </li>
              <li>
                <a href="https://www.facebook.com/CronoBusinessIntelligence/">Facebook Crono Business Intealligence</a>
              </li>
            </ul>
            <div class="comentarios">
              <div id="disqus_thread"></div>
              <script>
            		var disqus_config = function () {
            			this.page.url = 'https://www.businessintelligence.info/crono/sql-dry-dont-repeat-yourself.html'
            			this.page.identifier = 'ipinXqckgm'
            		};	
            		(function() { 
            			var d = document, s = d.createElement('script');
            			s.src = '//bifacil.disqus.com/embed.js';
            			s.setAttribute('data-timestamp', +new Date());
            			(d.head || d.body).appendChild(s);
            		})();
            	</script>
            </div>
          </article>
        </main>
      </div>
    </div>
    <footer>
      <div class="row">
        <div class="span3">
          <ul>
            <li>
              <a href="../index.html">Inicio</a>
            </li>
            <li>
              <a href="../archivo.html">Archivo</a>
            </li>
            <li>
              <a href="../categorias.html">Categorías</a>
            </li>
            <li>
              <a href="../sobre-el-blog/contacto.html">Contacto</a>
            </li>
            <li>
              <a href="../sobre-el-blog/enlaces.html">Enlaces</a>
            </li>
          </ul>
        </div>
        <div class="span3">
          <div class="rrss-footer">
            <a href="https://www.linkedin.com/company/businessintelligence" target="_blank" class="fa fa-linkedin"></a>
            <a href="http://twitter.com/bifacil" target="_blank" class="fa fa-twitter"></a>
            <a href="https://www.youtube.com/c/BusinessIntelligenceInfo" target="_blank" class="fa fa-youtube"></a>
            <a href="https://www.facebook.com/CronoBusinessIntelligence" target="_blank" class="fa fa-facebook"></a>
          </div>
        </div>
        <div class="span3">
          <section class="newsletter">
            <p>¿Quieres recibir los artículos de este blog por correo electrónico? No te pierdas ni un artículo. Mantente informado sobre lo que ocurre en el mundo del Business Intelligence. 
<a href="../subscribe.html">¡Síguenos!</a></p>
          </section>
        </div>
      </div>
    </footer>
    <script src="../resources/js/scripts.js"></script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-3456231-2");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
    <script type="text/javascript">prettyPrint();</script>
  </body>
</html>